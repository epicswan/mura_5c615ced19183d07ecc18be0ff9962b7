!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.TableRcpt=t(require("react")):e.TableRcpt=t(e.React)}("undefined"!=typeof self?self:this,function(e){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=r.default},function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=function(e){return e&&e.__esModule?e:{default:e}}(s),d=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasError:!1},n}return i(t,e),l(t,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?u.default.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(u.default.Component),f=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a={left:"justify-content-start",center:"justify-content-center",right:"justify-content-end"};return n.state={btnAlignObj:a,id:function(){return"table-"+Math.random().toString(36).substr(2,16)}(),clickExCol:[0,6,8],config:{columns:[]}},n.handleSelected=n.handleSelected.bind(n),n.handleActive=n.handleActive.bind(n),n.handleBatch=n.handleBatch.bind(n),n.handleClick=n.handleClick.bind(n),n.handleResults=n.handleResults.bind(n),n}return i(t,e),l(t,[{key:"componentWillUnmount",value:function(){$(document).off("click",".dataTables_wrapper .we-table tr td"),$(document).off("click",".border-switch-control-input"),$(document).off("click",".checkall"),$(document).off("click",".datatable-checkbox"),$(".individual_filtering").off("keyup change"),$("select.individual_filtering").off("keyup change")}},{key:"handleSelected",value:function(e){0==e.ids.length?this.handleBatch(c({},e,{status:!1})):e.ids.length>1?this.handleBatch(c({},e,{status:!0})):this.props.onAction({action:"selected",obj:e})}},{key:"handleClick",value:function(e){this.props.onAction({action:"click",obj:e})}},{key:"handleResults",value:function(e){this.props.onAction({action:"results",obj:e})}},{key:"handleActive",value:function(e){this.props.onAction({action:"active",obj:e})}},{key:"handleBatch",value:function(e){this.props.onAction({action:"batch",obj:e})}},{key:"loadDatatable",value:function(){var e=this,t=this.state.id,n=this,a={name:"myDt",options:{orderCellsTop:!0,orderClasses:!0,orderMulti:!0,pageLength:25,pagingType:"simple_numbers",renderer:"",scrollCollapse:!1,searchDelay:0,stateDuration:7200,serverSide:!0,processing:!0},features:{autoWidth:!0,deferRender:!1,info:!1,lengthChange:!1,ordering:!0,paging:!0,processing:!0,searching:!0,stateSave:!1},ajax:{url:this.props.url,type:"GET",beforeSend:function(e){var t=n.props.bearer,a="Bearer "+t;e.setRequestHeader("authorization",a)},error:function(t,n,a){e.props.onAction({action:"catch_error",data:{xhr:t,error:n,code:a}})}}},r={language:{sProcessing:"Traitement en cours...",sSearch:"Rechercher&nbsp;:",sLengthMenu:"Afficher _MENU_ &eacute;l&eacute;ments",sInfo:"Affichage de l'&eacute;l&eacute;ment _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",sInfoEmpty:"Affichage de l'&eacute;l&eacute;ment 0 &agrave; 0 sur 0 &eacute;l&eacute;ment",sInfoFiltered:"(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",sInfoPostFix:"",sLoadingRecords:"Chargement en cours...",sZeroRecords:"Aucun &eacute;l&eacute;ment &agrave; afficher",sEmptyTable:"Aucune donn&eacute;e disponible dans le tableau",oPaginate:{sFirst:"Premier",sPrevious:"Pr&eacute;c&eacute;dent",sNext:"Suivant",sLast:"Dernier"},oAria:{sSortAscending:": activer pour trier la colonne par ordre croissant",sSortDescending:": activer pour trier la colonne par ordre d&eacute;croissant"},select:{rows:{_:"%d lignes séléctionnées",0:"Aucune ligne séléctionnée",1:"1 ligne séléctionnée"}}}};$(function(){function e(e){function i(e){var t="";for(var n in e){t+="<option value='"+n+"'"+(0==n?"selected='selected'":"")+" >"+e[n]+"</option>"}return t}function c(){var t="",n=e;return $(e.filters[0]).each(function(e,a){var r=n.columns.columns[e];1==r.visible&&(0==r.searchable?t+="<td></td>":void 0!==a.searchType?void 0!==a.placeholder?t+="<td><input data-toggle='tooltip' title='Appuyer sur Entrée pour lancer la recherche' type='text'class='we-form-control individual_filtering'placeholder='"+r.title+"'/></td>":t+="<td><select class='we-form-control individual_filtering' data-filter-property-id='"+e+"'>"+i(a.options.select_options)+"</select></td>":t+="<td></td>")}),t}e.columns.columns[0]={contentPadding:"",defaultContent:"",name:"",orderable:!1,searchable:!1,title:'<label class="custom-control fill-checkbox"><input type="checkbox" class="fill-control-input checkall"><span class="fill-control-indicator"></span></label>',visible:!0,className:"",width:"",data:null,render:function(e,t,n,a){var r,o="";return n.hasOwnProperty("id")&&(r=n.id),o+="",o+="<center><label class='custom-control fill-checkbox '><input type='checkbox' class='fill-control-input datatable-checkbox' value='",o+=r,o+="'",o+="/><span class='fill-control-indicator'></span></label></center>",o+=""}},void 0!==e.order&&$.extend(o,{order:e.order}),$.extend(o,r),$.extend(o,{ajax:a.ajax}),$.extend(o,a.options),$.extend(o,a.features),$.extend(o,e.columns),n.setState({config:o});var l=[];$(document).on("click",".dataTables_wrapper .we-table tr td",function(e){var t=$(this).parent().find(".datatable-checkbox").val();-1==n.state.clickExCol.indexOf($(this).parent().children().index($(this)))&&t&&n.handleClick({id:t})}),$(document).on("click",".border-switch-control-input",function(){var e=$(this).closest(".border-switch-control-input"),t=e.is(":checked"),a=e.data("id"),r=e.parent(".custom-control.border-switch").find(".border-switch-control-description"),o=t?"En Ligne":"Hors Ligne";r.text(o),n.handleActive({id:a,status:t})}),$(document).on("click",".checkall",function(){var e=$(this).is(":checked");$(".datatable-checkbox").each(function(t){if($(this).prop("checked",e),e){$(this).parent("label").parent("center").parent("td").parent("tr").addClass("active");var t=l.indexOf($(this).val());-1==t&&l.push($(this).val())}else{$(this).parent("label").parent("center").parent("td").parent("tr").removeClass("active");var t=l.indexOf($(this).val());t>-1&&l.splice(t,1)}}),n.handleBatch({ids:l,status:e})}),$(document).on("click",".datatable-checkbox",function(){$(this).prop("checked",!$(this).is(":checked")),$(this).prop("checked",!$(this).is(":checked"));var e=this;setTimeout(function(){if($(e).is(":checked")){var t=l.indexOf($(e).val());$(e).parent("label").parent("center").parent("td").parent("tr").addClass("active"),-1==t&&l.push($(e).val())}else{$(e).parent("label").parent("center").parent("td").parent("tr").removeClass("active");var t=l.indexOf($(e).val());t>-1&&l.splice(t,1)}n.handleSelected({ids:l})},200)});var s=!1;o.initComplete=function(e,r){var o=this;$(".dataTables_filter").remove(),$("."+t+" thead").append('<tr class="filters">'+c()+"</tr>");var i=$.fn.DataTable.util.throttle(function(e){if("keyup"!=e.type||13==e.keyCode)return 0==s&&($(".dataTables_wrapper table").css({opacity:.2}),s=!0,o.DataTable().column($(this).parent().index()+":visible").search(this.value).draw(),void 0)},a.options.searchDelay);$(".individual_filtering").on("keyup change",i),$("select.individual_filtering").on("keyup change",function(e){var t=$(e.currentTarget).data("filter-property-id"),a=$(this).val();a=a?a.toString():"",n.DataTable().column(t).search(a).draw()})};var u=$("."+t).DataTable(o).on("draw",function(e){$(".dataTables_wrapper table").css({opacity:1}),s=!1,n.handleBatch({ids:[],status:!1}),n.handleResults({total:u.page.info()}),l=[]})}var o={columnDefs:[{targets:0,checkboxes:{selectRow:!0}}],select:{style:"multi"}};n.props.dataTableConf?e(n.props.dataTableConf):$.ajax({dataType:"json",url:n.props.url,beforeSend:function(e){var t=n.props.bearer,a="Bearer "+t;e.setRequestHeader("authorization",a)},success:function(t){e(t)}})})}},{key:"componentDidMount",value:function(){"datatable"==this.props.table.mode&&this.loadDatatable()}},{key:"render",value:function(){var e=window.WifeoLibRcpt.RcptBtnMode,t=window.WifeoLibRcpt.RcptSection,n=window.WifeoLibRcpt.RcptUtils,r=n._css,o=this.props,i=o.blocks,l=a(o,["blocks"]),s=this.props,f=s.prefixCss,p=s.mode,h=s.onAction,b=s.btnAlign,v=this.state.btnAlignObj,m=i.find(function(e){return"title"===e.name})||{title:null},y=m.title,g=i.find(function(e){return"stitle"===e.name})||{stitle:null},x=g.stitle,k=i.filter(function(e){return"cta"===e.name}),w=v[b]||v.center;return u.default.createElement(d,null,u.default.createElement(t,c({useBorderSvg:!0,title:y,stitle:x},l),u.default.createElement("div",{className:"we-table-responsive"},u.default.createElement("table",{className:"we-table table-striped "+this.state.id})),k&&k.length>0&&u.default.createElement("div",{className:r(f,"d-flex","flex-wrap-reverse",w)},k.map(function(t,n){return u.default.createElement(e,{key:n,prefixCss:f,mode:p,cta:t,onAction:h})}))))}}]),t}(s.Component);f.defaultProps={mode:"view",prefixCss:"",sectionCss:"text-center ",btnAlign:"center",dataTableConf:null,bearer:"eyJhbGciOiJSUzI1NiJ9.eyJyb2xlcyI6WyJST0xFX1JFQURFUiIsIlJPTEVfVVNFUiJdLCJ1c2VybmFtZSI6IkIxNEY4NjE5LTVCMTAtNEQ1NC05Qjc5LUE1MDNGN0VCN0RBNyIsImlwIjoiMTcyLjE2LjIzOC40IiwiaWF0IjoxNTQzOTIyNDY5LCJleHAiOjE1NDQwMDg4Njl9.oXhwvipAh27hdwy4VSMvDs9gQtyr6vK70s7x3-yQcX1qSsKPVf-XsdaVWWlfNFYHD4LoMf5s23touiYHgH-FGTy9bgk1FfUaEEm8KnIvHSwWKZHiorZrjoGzPUa3WZGIcdcdabPve5wejGTnxXGjPt_Ie6sqTZWrhWr0j4KO0ZoWHtSGgOBfsWfqFefe_3vOUblvmNq587dIxvyDbO-xZdnl21dwnsObKy-3tKsbr9THRjYIOuyf7a0QjjR1WjNSLicR6zxJcGZktZQg9-1QKy_pgD2epcwFBpo2CWJrlW0KuSjWaJqBGADglbubdKt0GxlZA48hbxdK_sZ9a_8v6YYbGFG-0vJEOrIMjd1dy0-H4RxUVypXg9PA_s8DLy1D2_NgARh78CKy0OPkaPwrpB9x-7pT8ByJCN9CR9q2Dpfii1DnwGGzzWTLeXqD84AOo4ps4cHJMkCXH5ltQUmnY7CCx64_TwboZif9cY3cVBoTx-jBO8N22UU4lnHmH4fJMIF6XWo-ImSTBLNe8m0fOOEz-X0dA76GDt0Ttg5Q6DTXy5aTAEGjQ0MU0pAdcfmJufUGa9C6U0uh7ob0OSs7rMg4zqS5REeEaMh2L9sxiZEBYboOvCxH5ZmcNyB83wA1HtuSSe-4zjGq8U8SkL3JW4mI3Tlko74mz1Us6OziRMU",table:{mode:"datatable",data:{}},bg:{class:"",img:{path:"",class:""}},blocks:[{name:"title",title:{txt:"Gros titre",class:""}},{name:"cta",class:"btn-primary",link:"#demo1",txt:"demo1",visible:!1},{name:"cta",class:"btn-secondary",link:"#demo2",txt:"demo2",visible:!1}],onAction:function(e){}},t.default=f},function(t,n){t.exports=e}])});